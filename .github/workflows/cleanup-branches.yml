name: Cleanup Development Documentation

on:
  schedule:
    # ë§¤ì¼ ìì •ì— ì‹¤í–‰ (UTC)
    - cron: '0 0 * * *'
  workflow_dispatch:

jobs:
  cleanup:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout
        uses: actions/checkout@v4

      - name: Cleanup old dev branches
        run: |
          # 30ì¼ ì´ìƒ ëœ ê°œë°œ ë¸Œëœì¹˜ ë¬¸ì„œ ì‚­ì œ
          find services/*/dev-branches -type d -name "*" -mtime +30 -exec rm -rf {} + 2>/dev/null || true
          
          # ë³€ê²½ì‚¬í•­ì´ ìˆìœ¼ë©´ ì»¤ë°‹
          if [[ -n $(git status --porcelain) ]]; then
            git config user.name "GitHub Actions Bot"
            git config user.email "actions@github.com"
            git add .
            git commit -m "ğŸ§¹ Auto-cleanup: Remove development documentation older than 7 days"
            git push
          fi